<div class="container">
  <h2>Confirmed Rides</h2>
  <div class="filters">
    <input type="text" [(ngModel)]="searchUsername" placeholder="Search by username" (input)="applyFilters()">
    <input type="text" [(ngModel)]="searchPhoneNumber" placeholder="Search by phone number" (input)="applyFilters()">
    <input type="text" [(ngModel)]="searchRequestId" placeholder="Search by request ID" (input)="applyFilters()">
    <select [(ngModel)]="filterStatus" (change)="applyFilters()">
      <option value="">All Status</option>
      <option value="Accepted">Accepted</option>
      <option value="Arrived">Arrived</option>
      <option value="Picked">Picked</option>
      <option value="Started">Started</option>
      <option value="Completed">Completed</option>
    </select>
    <select [(ngModel)]="filterVehicle" (change)="applyFilters()">
      <option value="">All Vehicles</option>
      <option value="Sedan">Sedan</option>
      <option value="SUV">SUV</option>
      <!-- Add more vehicle types as needed -->
    </select>
    <input type="date" [(ngModel)]="fromDate" (change)="applyFilters()">
    <input type="date" [(ngModel)]="toDate" (change)="applyFilters()">
  </div>

  <table class="table">
    <thead>
      <tr>
        <th>Request ID</th>
        <th>Username</th>
        <th>User ID</th>
        <th>Pickup Time</th>
        <th>Pickup Address</th>
        <th>Dropoff Address</th>
        <th>Service Type</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let ride of filteredRides">
        <td>{{ ride._id }}</td>
        <td>{{ ride.username }}</td>
        <td>{{ ride.userId }}</td>
        <td>{{ ride.pickupTime | date: 'short' }}</td>
        <td>{{ ride.pickupAddress }}</td>
        <td>{{ ride.dropoffAddress }}</td>
        <td>{{ ride.serviceType }}</td>
        <td>{{ ride.status }}</td>
        <td>
          <button *ngIf="ride.status === 'Confirmed'" (click)="assignDriver(ride._id, 'someDriverId')">Assign</button>
          <button *ngIf="ride.status !== 'Completed'" (click)="cancelRide(ride._id)">Cancel</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
